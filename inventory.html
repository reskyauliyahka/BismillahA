<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventory Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f4f6f9;
            display: flex;
            min-height: 100vh;
            margin: 0;
        }

        /* Main content styles */
        .main-content {
            flex-grow: 1;
            background-color: #f4f6f9;
            display: flex;
            flex-direction: column;
            padding: 20px;
            min-height: 100vh;
        }

        .pagination .page-link {
            color: #630000;
        }

        .pagination .page-link:active {
            background-color: #630000;
            color: #f4f6f9;
        }

        .inventory-table {
            flex-grow: 1;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 10px;
            text-align: left;
            color: white;
        }

        .pagination-container {
            display: flex;
            justify-content: center;
            margin-top: auto;
            padding-bottom: 20px;
        }

        .d-flex.align-items-start {
            display: flex;
            align-items: flex-start;
            gap: 20px;
        }

        .ms-4 {
            margin-left: 20px;
        }

        .card {
            width: 100%;
        }

        .card h5 {
            text-align: center;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Main Content -->
    <div class="main-content">
        <div class="d-flex">
            <div class="inventory-table mb-4">
                <table class="table table-hover" style="border-radius: 25px; overflow: hidden;">
                    <thead>
                        <tr>
                            <th style="color: #718EBF;">Product</th>
                            <th style="color: #718EBF;">Category</th>
                            <th style="color: #718EBF;">Stock</th>
                            <th style="color: #718EBF;">Price</th>
                        </tr>
                    </thead>
                    <tbody id="productList">
                        <!-- Product rows generated by JavaScript -->
                    </tbody>
                </table>
            </div>

            <div class="d-flex justify-content-between flex-column m-4" style="min-width: 300px;">
                <div>
                    <button class="btn mb-3 w-100" style="border-radius: 25px; background-color: #630000; color: white;" onclick="addProduct()">Add Product</button>
                    <button class="btn mb-3 w-100" style="border-radius: 25px; background-color: #630000; color: white;" onclick="updateProduct()">Update Product</button>
                    <button class="btn mb-3 w-100" style="border-radius: 25px; background-color: #630000; color: white;" onclick="deleteProduct()">Delete Product</button>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Overview</h5>
                        <p style="color: #718EBF;">Total Products: <span id="total-products">0</span></p>
                        <p style="color: #718EBF;">Total Stock: <span id="total-stock">0</span></p>
                    </div>
                </div>
            </div>
        </div>

        <div class="pagination-container">
            <ul class="pagination">
                <li class="page-item"><a class="page-link" href="#">Previous</a></li>
                <li class="page-item"><a class="page-link" href="#">1</a></li>
                <li class="page-item"><a class="page-link" href="#">2</a></li>
                <li class="page-item"><a class="page-link" href="#">3</a></li>
                <li class="page-item"><a class="page-link" href="#">Next</a></li>
            </ul>
        </div>
    </div>

    <script>
        let products = JSON.parse(localStorage.getItem('products')) || [];
        const productList = document.getElementById("productList");

        // Render produk dan simpan perubahan ke localStorage
        function renderProducts() {
            productList.innerHTML = '';
            let totalStock = 0;

            products.forEach((product, index) => {
                const row = document.createElement("tr");
                row.innerHTML = `
                    <td>${product.product}</td>
                    <td>${product.category}</td>
                    <td>${product.stock}</td>
                    <td>${product.price}</td>
                `;
                row.setAttribute("data-index", index);
                productList.appendChild(row);

                // Add stock to total stock
                totalStock += parseInt(product.stock);

                // Check if stock is 0 or 1 and show alert
                if (product.stock <= 1) {
                    alert(`Produk ${product.product} mendekati batas maksimum)!`);
                }
            });
            updateOverview(totalStock);
            localStorage.setItem('products', JSON.stringify(products)); // Simpan produk ke localStorage setiap kali render
        }

        function updateOverview() {
            document.getElementById('total-products').innerText = products.length;
        }

        function addProduct() {
            const product = prompt("Enter product name:");
            const category = prompt("Enter product category:");
            const stock = prompt("Enter stock:");
            const price = parseFloat(prompt("Enter product price:"));

            if (product && category && stock && !isNaN(price)) {
                products.push({ product, category, stock, price });
                renderProducts();
            } else {
                alert("Please fill all product details correctly.");
            }
        }

        function updateProduct() {
            const index = prompt(`Enter the product number to update (1-${products.length}):`);
            if (index && index > 0 && index <= products.length) {
                const product = prompt("Enter new product name:", products[index - 1].product);
                const category = prompt("Enter new category:", products[index - 1].category);
                const stock = prompt("Enter new stock:", products[index - 1].stock);
                const price = parseFloat(prompt("Enter new price:", products[index - 1].price));

                if (product && category && stock && !isNaN(price)) {
                    products[index - 1] = { product, category, stock, price };
                    renderProducts();
                } else {
                    alert("Please fill all product details correctly.");
                }
            } else {
                alert("Invalid product number.");
            }
        }

        function deleteProduct() {
            const index = prompt(`Enter the product number to delete (1-${products.length}):`);
            if (index && index > 0 && index <= products.length) {
                products.splice(index - 1, 1);
                renderProducts();
            } else {
                alert("Invalid product number.");
            }
        }

        // Load products on page load
        window.onload = function() {
            renderProducts();
        }
    </script>

</body>
</html>
